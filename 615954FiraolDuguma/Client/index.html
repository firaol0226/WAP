<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.3.0/mdb.min.css"
        rel="stylesheet"/>
    <link rel="stylesheet" href="style.css">

</head>
<body>
  <header>
    <nav>
        <form>
            <!-- Email input -->
            <div class="top">
                <div class="logo">
                    <img src="http://localhost:4000/logo.jpg" alt="logo">
                </div>
                <div class="right-just">
                    <div class="info">         
                        <div class="form-outline mb-4">
                            <input type="email" id="form2Example1" class="form-control" />
                            <label id='place' class="form-label" for="form2Example1">Username</label>
                        </div>
                    
                        <!-- Password input -->
                        <div class="form-outline mb-4">
                            <input type="password" id="form2Example2" class="form-control" />
                            <label class="form-label" for="form2Example2">Password</label>
                            <p id="errorMsg"></p>
                        </div>
                    </div>                
                    <!-- Submit button -->
                    <div class ="log">
                        <button type="button" class="btn btn-primary btn-block mb-4" id="loginBtn">Login</button>
                    </div>
                </div>
            </div>

          </form>
    </nav>
  </header>
    <hr>
    <main>
      <h1>Welcome to <span>My Store</span></h1>
      
    </main>
    <footer>
      <!-- <p>Copyright &copy; 2022 <a href="https://github.com/shubham-singh-coder">Shubham Singh</a></p> -->
    </footer>
    
    <script >
      
      document.getElementById('form2Example1').style.border='solid 1px'
        document.getElementById('form2Example2').style.border='solid 1px'

            console.log("login")
            document.getElementById('loginBtn').onclick = function(){
              console.log("hello")
                fetch('http://localhost:4000/login',{
                    method: 'POST',
                    body:JSON.stringify({
                        username: document.getElementById('form2Example1').value,
                        password: document.getElementById('form2Example2').value
                    }),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                }).then(response => response.json())
                    .then(data => {
                        if(data.error){
                            //here is error
                            document.getElementById('errorMsg').innerHTML = data.error;
                        } else {
                          console.log("result",data);
                            sessionStorage.setItem('accessToken', data.accessToken);
                            window.location.href = 'product.html'
                            
                        }
                    })
                document.getElementById('form2Example1').value='';
                document.getElementById('form2Example2').value='';
            }
        // }
</script>

</body>
</html>